<nd-modal id="publishModal">
    <div class="modal-header">


        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <button ng-if="objectToShare.isShared == true" class="btn btn-danger" ng-click="unShare()" translate>Unshare</button>
        <h4 ng-if="objectToShare.isShared == false" translate>Share</h4>
    </div>
    <div class="modal-body">
        <p>{{modalOptions.bodyText}}</p>

        <button ng-if="objectToShare.isPublic == false" uib-tooltip="Click here to publish your work (Even not logged users will see it)" class="btn btn-xs btn-success" ng-click="Publish()" translate>Publish</button>
        <button ng-if="objectToShare.isPublic == true" class="btn btn-xs btn-danger" ng-click="unPublish()" translate>Unpublish</button>

        <div ng-if="isWSTADMIN" class="row">
            <span class="tree-node tree-node-content tree-node-folder" translate>root folder</span>
            <button ng-if="objectToShare.parentFolder != 'root' || objectToShare.isShared == false" class="btn btn-success btn-xs" ng-click="selectThisFolder('root')" translate>select</button>
            <span class="badge badge-black" ng-if="objectToShare.parentFolder == 'root' && objectToShare.isShared == true" translate>selected</span>
        </div>

        <div ui-tree data-nodrop-enabled id="tree-root" >
            <ol ui-tree-nodes data-nodrop-enabled ng-model="userObjects">
                <li ng-if="((node.grants.executeReports == true || node.grants.executeDashboards == true) && node.nodeType != 'report' && node.nodeType != 'dashboard' && (node.grants.shareReports == true || isWSTADMIN))  " ng-repeat="node in userObjects" ui-tree-node ng-include="'publicFolders_renderer.html'"></li>
            </ol>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn" data-dismiss="modal" translate>Cancel</button>
    </div>
</nd-modal>


<script type="text/ng-template" id="publicFolders_renderer.html">
    <div  data-nodrag ui-tree-handle data-nodrop-enabled class="tree-node tree-node-content tree-node-folder" ng-if="((node.grants.executeReports == true || node.grants.executeDashboards == true) && node.nodeType != 'report' && node.nodeType != 'dashboard')  "> <!--&& node.nodes.length > 0 -->
        <span class="fa" ng-class="{'fa-folder': collapsed,'fa-folder-open-o': !collapsed}" ng-click="toggle(this)"></span>
        <span data-nodrag ng-click="toggle(this)" style="padding-left: 5px;margin-right: 5px;">{{node.title}}</span>
        <button ng-if="objectToShare.parentFolder != node.grants.folderID || objectToShare.isShared == false" class="btn btn-success btn-xs" ng-click="selectThisFolder(node.grants.folderID)" translate>select</button>
        <span class="badge badge-black" ng-if="objectToShare.parentFolder == node.grants.folderID && objectToShare.isShared == true" translate>selected</span>
    </div>

    <ol ng-if="node.nodes" data-nodrag ui-tree-nodes data-nodrop-enabled ng-model="node.nodes" ng-class="{hidden: collapsed}">
        <li ng-if="((node.grants.executeReports == true || node.grants.executeDashboards == true) && node.nodeType != 'report' && node.nodeType != 'dashboard' && (node.grants.shareReports == true || isWSTADMIN))"    data-nodrag ng-repeat="node in node.nodes" ui-tree-node ng-include="'publicFolders_renderer.html'">
        </li>
    </ol>
</script>
